import{s as N,r as v,a as V,b as L,x as F,e as r,j as O,w as C,m as S,l as b,u,y as _,g as e,f as a,p as Q,v as Y,F as w,i as B,k as X,t as m,h as j,z as R,R as z,_ as M,q as $,B as H,C as P,D as ee,o as te,E as I}from"./index-sLfY9VFm.js";import{U as K}from"./UserService-AtjAqmIY.js";import{T as E,S as se,_ as le}from"./SideSectionTop-V8X1dW3_.js";import{u as G}from"./UserStore-7hEIdAzC.js";import{_ as ie,u as Z,a as oe}from"./SimpleSelect-36nkVXFG.js";import{S as J}from"./SimpleButton-kqmWcx28.js";import{_ as re}from"./Chevron Down-nkaAdt-3.js";import{S as ne}from"./StatusesService-zM_cYs_L.js";import{_ as ae}from"./Modal-xMsFEA1-.js";const D=N({id:"ticketFilter",state:()=>({filter:{technician:"all",category:"all",priority:"all",status:"all",title:"",createdDate:"",closedDate:"",searchTerm:""},tickets:[],sideFilterChange:v(0),selectedSideFilter:null}),getters:{filteredTickets(){return this.filterTickets(this.tickets)}},actions:{async getTickets(){return this.tickets=(await E.getTickets()).data,this.tickets},handleFilterChange(s,o){this.filter[s]=o},handleSideFilterChange(){this.sideFilterChange++},resetSideFilter(){this.selectedSideFilter=null},handleFilterReset(){this.filter={technician:"all",category:"all",priority:"all",status:"all",title:"",createdDate:"",closedDate:"",searchTerm:""}},filterTickets(s){return s.filter(t=>{var n;const d=this.filter.searchTerm.toLowerCase();return!(this.filter.searchTerm&&!t.title.toLowerCase().includes(d)&&!(((n=t.assignedto)==null?void 0:n.name.toLowerCase())||"").includes(d)&&!t.status.name.toLowerCase().includes(d)||this.filter.technician!=="all"&&t.assignedto&&!this.filter.technician.includes(t.assignedto.name)||this.filter.category!=="all"&&!this.filter.category.includes(t.category.name)||this.filter.priority!=="all"&&!this.filter.priority.includes(t.priority.name)||this.filter.status!=="all"&&!this.filter.status.includes(t.status.name)||this.filter.title&&!t.title.includes(this.filter.title)||this.filter.createdDate&&new Date(t.created_at).toDateString()!==new Date(this.filter.createdDate).toDateString())})}}}),ce={class:"flex flex-col py-2 gap-4"},de={class:"flex flex-col px-4 gap-2 xl:gap-4"},Ae=e("span",{class:"justify-between flex"},[e("div",{class:"text-purple text-l xl:text-lg whitespace-nowrap pr-2"}," Assignados a mim "),e("span",{class:"text-white text-l xl:text-lg whitespace-nowrap justify-center bg-purple aspect-[1.5] px-2.5 rounded-3xl"},"10")],-1),pe=[Ae],ue=e("span",{class:"justify-between flex"},[e("div",{class:"text-purple text-l xl:text-lg whitespace-nowrap pr-2"}," Os meus tickets "),e("span",{class:"text-white text-l xl:text-lg whitespace-nowrap justify-center bg-purple aspect-[1.5] px-2.5 rounded-3xl"},"10")],-1),he=[ue],ge={class:"justify-center flex flex-col pt-2"},fe=e("div",{class:"text-purple text-l xl:text-lg whitespace-nowrap"}," Pendente ",-1),xe=e("span",{class:"text-white text-l xl:text-lg whitespace-nowrap justify-center bg-purple aspect-[1.5] px-2.5 rounded-3xl"},"10",-1),me=[fe,xe],be=e("div",{class:"text-purple text-l xl:text-lg whitespace-nowrap"}," Em progresso ",-1),ke=e("span",{class:"text-white text-l xl:text-lg whitespace-nowrap justify-center bg-purple aspect-[1.5] px-2.5 rounded-3xl"},"10",-1),we=[be,ke],ye=e("div",{class:"text-purple text-l xl:text-lg whitespace-nowrap"}," Completo ",-1),_e=e("span",{class:"text-white text-l xl:text-lg whitespace-nowrap justify-center bg-purple aspect-[1.5] px-2.5 rounded-3xl"},"10",-1),ve=[ye,_e],Ce={__name:"SideFilter",setup(s){const o=D();let t=V({selected:null});const d=G();L(async()=>{await d.fetchAuthedUser()});const n=()=>{o.handleFilterReset(),t.selected="Todos os tickets",x()},p=()=>{o.handleFilterChange("technician",d.currentUser.name),t.selected="Assignados a mim",x()},h=()=>{o.handleFilterChange("user",d.currentUser.name),t.selected="Os meus tickets",x()},f=l=>{o.handleFilterReset(),o.handleFilterChange("status",l),t.selected=l,x()},x=()=>{o.handleSideFilterChange()};return F(()=>o.filteredTickets,()=>{t.selected=null}),(l,c)=>(r(),O(le,null,{default:C(()=>[b(se,null,{default:C(()=>[S("Tickets")]),_:1}),e("div",ce,[e("div",de,[e("span",{onClick:n,class:_([{"bg-greyDark":u(t).selected==="Todos os tickets"},"hoverGreyDark rounded-t-lg text-pink-600 text-l xl:text-lg justify-center py-3.5 px-2 border-b-purple border-b-opacity-30 border-b border-solid"])}," Todos os tickets ",2),e("div",{onClick:p,class:_([{"bg-greyDark":u(t).selected==="Assignados a mim"},"hoverGreyDark rounded-t-lg justify-center py-3.5 px-2 flex flex-col border-b-purple border-b-opacity-30 border-b border-solid"])},pe,2),e("div",{onClick:h,class:_([{"bg-greyDark":u(t).selected==="Os meus tickets"},"hoverGreyDark rounded-t-lg justify-center py-3.5 px-2 flex flex-col border-b-purple border-b-opacity-30 border-b border-solid"])},he,2),e("div",ge,[e("span",{onClick:c[0]||(c[0]=i=>f("Pendente")),class:_([{"bg-greyDark":u(t).selected==="Pendente"},"justify-between flex py-3 px-2 hoverGreyDark rounded-lg"])},me,2),e("span",{onClick:c[1]||(c[1]=i=>f("Em progresso")),class:_([{"bg-greyDark":u(t).selected==="Em progresso"},"justify-between flex py-3 px-2 hoverGreyDark rounded-lg"])},we,2),e("span",{onClick:c[2]||(c[2]=i=>f("Completo")),class:_([{"bg-greyDark":u(t).selected==="Completo"},"justify-between flex py-3 px-2 hoverGreyDark rounded-lg"])},ve,2)])])])]),_:1}))}},Be="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15%2010.5C15%2012.9853%2012.9853%2015%2010.5%2015C8.01472%2015%206%2012.9853%206%2010.5C6%208.01472%208.01472%206%2010.5%206C12.9853%206%2015%208.01472%2015%2010.5ZM14.1793%2015.2399C13.1632%2016.0297%2011.8865%2016.5%2010.5%2016.5C7.18629%2016.5%204.5%2013.8137%204.5%2010.5C4.5%207.18629%207.18629%204.5%2010.5%204.5C13.8137%204.5%2016.5%207.18629%2016.5%2010.5C16.5%2011.8865%2016.0297%2013.1632%2015.2399%2014.1792L20.0304%2018.9697L18.9697%2020.0303L14.1793%2015.2399Z'%20fill='%23080341'/%3e%3c/svg%3e",Se={class:"border bg-white flex justify-between w-40 lg:w-60 py-1 lg:py-0 lg:px-2.5 rounded-xl border-solid border-black border-opacity-20"},Te=e("img",{loading:"lazy",src:Be,class:"aspect-[1.5] object-contain object-center"},null,-1),De={__name:"SearchBox",setup(s){const o=D(),t=v(""),d=(n,p)=>{o.handleFilterChange(n,p)};return(n,p)=>(r(),a("span",Se,[Te,Q(e("input",{type:"text",class:"bg-transparent text-gray-900 focus:outline-none focus-visible:outline-none rounded-lg w-full lg:p-2",placeholder:"Procurar... ","onUpdate:modelValue":p[0]||(p[0]=h=>t.value=h),onInput:p[1]||(p[1]=h=>d("searchTerm",t.value))},null,544),[[Y,t.value]])]))}},je="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M4%2012H20M12%204V20'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",Ee={class:"relative"},Fe=e("img",{loading:"lazy",src:je,class:"self-center"},null,-1),Oe=e("div",{class:"text-white sm:text-lg"},"Filtros",-1),Qe=[Fe,Oe],Ue={key:0,class:"absolute left-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5"},Ie={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},Ve=["href","onClick"],Re=["onClick"],Me={class:"flex gap-1"},$e=["onClick"],He=e("img",{loading:"lazy",src:re},null,-1),Pe={key:0,class:"absolute left-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 p-2"},Ke=["onUpdate:modelValue"],Ge=["value"],Ze=["onClick"],Je=["onClick"],We={__name:"FilterDropdown",setup(s){const o=D(),t=V({isOpen:!1,selectedOptions:[],dropdownItems:[{id:"technician",name:"Técnico"},{id:"category",name:"Categoria"},{id:"priority",name:"Prioridade"},{id:"status",name:"Estado"}]}),d={technician:K.getTechnicians,category:E.getCategories,priority:E.getPriorities,status:ne.getStatuses},n=()=>{t.isOpen=!t.isOpen},p=async l=>{if(!t.selectedOptions.find(c=>c.id===l.id)){const c=d[l.id];if(c){const i=(await c()).data.map(A=>({id:A.id,name:A.name}));t.selectedOptions.push({...l,isOpen:!1,selectedNestedOptions:[],dropdownItems:i})}}t.isOpen=!1},h=l=>{l.selectedNestedOptions.find(c=>c.id===l.selectedNestedOption.id)||l.selectedNestedOptions.push(l.selectedNestedOption),l.selectedNestedOption=null,l.isOpen=!1,o.handleFilterChange(l.id,l.selectedNestedOptions.map(c=>c.name)),o.resetSideFilter()},f=(l,c)=>{l.selectedNestedOptions=l.selectedNestedOptions.filter(i=>i.id!==c.id),l.selectedNestedOptions.length===0?o.handleFilterChange(l.id,"all"):o.handleFilterChange(l.id,l.selectedNestedOptions.map(i=>i.id))};return F(()=>o.sideFilterChange,()=>{t.selectedOptions.forEach(l=>{l.selectedNestedOptions=[]}),t.selectedOptions=[]}),(l,c)=>(r(),a(w,null,[e("div",Ee,[e("button",{onClick:n,class:"justify-center bg-purple flex gap-2.5 px-3 py-[5.5px] rounded-xl"},Qe),t.isOpen?(r(),a("div",Ue,[e("div",Ie,[(r(!0),a(w,null,B(t.dropdownItems,i=>(r(),a("a",{key:i.id,href:i.href,onClick:X(A=>p(i),["prevent"]),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 cursor-pointer",role:"menuitem"},m(i.name),9,Ve))),128))])])):j("",!0)]),(r(!0),a(w,null,B(t.selectedOptions,i=>(r(),a("div",{key:i.id,class:"relative bg-purple text-white px-2 py-1 rounded-xl"},[e("button",{onClick:A=>i.isOpen=!i.isOpen},[e("div",Me,[e("img",{loading:"lazy",src:ie,class:"self-center hoverRed rounded-md",onClick:A=>t.selectedOptions=t.selectedOptions.filter(T=>T.id!==i.id)},null,8,$e),e("p",null,m(i.name),1),He])],8,Re),i.isOpen?(r(),a("div",Pe,[Q(e("select",{"onUpdate:modelValue":A=>i.selectedNestedOption=A,class:"cursor-pointer block w-full px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm mb-2"},[(r(!0),a(w,null,B(i.dropdownItems,A=>(r(),a("option",{key:A.id,value:A},m(A.name),9,Ge))),128))],8,Ke),[[R,i.selectedNestedOption]]),e("button",{class:"w-full text-center py-2 bg-purple text-white",onClick:A=>h(i)},"Done",8,Ze)])):j("",!0),(r(!0),a(w,null,B(i.selectedNestedOptions,A=>(r(),a("div",{onClick:T=>f(i,A),key:A.id,class:"inline-block bg-white rounded-lg px-3 py-1 text-sm font-semibold text-purpleLight ml-1 hoverRed"},m(A.name),9,Je))),128))]))),128))],64))}},qe={class:"text-purple flex sm:text-2xl text-xl whitespace-nowrap justify-between p-4 h-[9vh] border-b-purple border-b-opacity-30 border-b border-solid items-start"},Ne=e("div",null,"Todos os Tickets",-1),Le={class:"flex flex-row justify-between p-3 border-b-black border-b-opacity-30 border-b border-solid items-start"},Ye={class:"flex flex-col sm:flex-row items-center gap-2"},Xe={__name:"TopMenu",setup(s){return(o,t)=>(r(),a(w,null,[e("span",qe,[Ne,b(u(z),{to:"/tickets/create"},{default:C(()=>[b(J,null,{default:C(()=>[S(" + Criar Ticket ")]),_:1})]),_:1})]),e("div",Le,[e("div",Ye,[b(We)]),b(De)])],64))}},ze="data:image/jpeg;base64,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",et=s=>(H("data-v-8a7ba531"),s=s(),P(),s),tt={class:"border-b-black border-b-opacity-30 border-b border-solid hoverGrey"},st={class:"hidden sm:flex pl-5"},lt={class:"flex gap-2.5 min-w-fit"},it=et(()=>e("img",{loading:"lazy",src:ze,class:"aspect-square object-cover object-center w-12 overflow-hidden shrink-0 max-w-full rounded-[50%]"},null,-1)),ot={class:"flex flex-col h-full justify-center"},rt={class:"hidden sm:block text-black text-opacity-80 text-sm sm:text-lg"},nt={class:"hidden lg:block text-black text-opacity-50 text-sm sm:text-lg whitespace-nowrap"},at={class:"text-black text-opacity-80 text-sm sm:text-lg"},ct={class:"flex justify-center sm:justify-start"},dt={class:"text-black text-opacity-80 text-sm sm:text-lg"},At={class:"flex justify-center sm:justify-start sm:w-40"},pt={class:"text-white text-xs sm:text-base"},ut={class:"flex justify-center sm:block"},ht={__name:"TicketItem",props:{ticket:Object,technicians:Array},setup(s){const o=s,t=Z(),d=(n,p)=>{const h=o.ticket.id;t.handleShowModalTech(n,h,p)};return(n,p)=>(r(),a("tr",tt,[e("td",st,[e("div",lt,[it,e("div",ot,[e("div",rt,m(s.ticket.createdby.name),1),e("div",nt,m(s.ticket.createdby.email),1)])])]),e("td",at,[e("div",ct,m(s.ticket.title),1)]),e("td",dt,[e("div",At,[b(oe,{currentValue:s.ticket.assignedto,newValues:s.technicians,onShowModal:d},null,8,["currentValue","newValues"])])]),e("td",pt,[e("div",ut,[e("div",{style:$({backgroundColor:s.ticket.status.color}),class:"py-2 px-4 rounded-3xl w-fit"},m(s.ticket.status.name),5)])])]))}},gt=M(ht,[["__scopeId","data-v-8a7ba531"]]),ft=s=>(H("data-v-d3f7ffda"),s=s(),P(),s),xt={class:"table-auto"},mt=ft(()=>e("thead",null,[e("tr",{class:"border-b-black border-b-opacity-30 border-b border-solid"},[e("th",{class:"hidden sm:flex pl-5"},"CRIADO POR"),e("th",null,"TITULO"),e("th",null,"TÉCNICO"),e("th",null,"ESTADO")])],-1)),bt={class:"max-h-[56vh] overflow-y-auto"},kt={__name:"TicketsTable",props:{tickets:Array,technicians:Array},setup(s){const o=t=>{ee.push({name:"ticketDetails",params:{ticketId:t}})};return(t,d)=>(r(),a("table",xt,[mt,e("div",bt,[e("tbody",null,[(r(!0),a(w,null,B(s.tickets,n=>(r(),O(gt,{onClick:p=>o(n.id),key:n.id,ticket:n,technicians:s.technicians},null,8,["onClick","ticket","technicians"]))),128))])])]))}},wt=M(kt,[["__scopeId","data-v-d3f7ffda"]]),yt={class:"flex w-full"},_t={key:0},vt={key:1,class:"flex w-full"},Ct={class:"flex flex-col w-full"},Bt={class:"flex justify-between px-5 py-2 border-b-black border-b-opacity-30 border-b border-solid"},St={class:"text-black text-opacity-60 sm:text-xl"},Tt={class:"flex gap-1 sm:gap-2.5"},Dt=e("option",{value:"5"},"5 por pagina",-1),jt=e("option",{value:"10"},"10 por pagina",-1),Et=e("option",{value:"20"},"20 por pagina",-1),Ft=["value"],Ot=["onClick"],Gt={__name:"ShowTicketPage",setup(s){const o=v([]),t=v([]),d=v(1),n=v(5),p=v(""),h=G(),f=Z(),x=D(),l=()=>{f.convertTicketsToPDF(o.value)};te(async()=>{await c(),await i(),await h.fetchAuthedUser()});const c=async()=>{try{o.value=await x.getTickets()}catch(g){console.error("Error fetching tickets:",g)}},i=async()=>{try{const g=await K.getTechnicians();g.success?t.value=g.data:console.error("Invalid response structure:",g)}catch(g){console.error("Error fetching technicians:",g)}},A=()=>{f.handleCancelModal()},T=()=>{f.handleConfirmModal()},W=I(()=>{const g=x.filteredTickets,y=(d.value-1)*n.value,k=y+n.value;return g.slice(y,k)}),q=I(()=>Math.ceil(x.filteredTickets.length/n.value)),U=g=>{d.value=g};return F(p,()=>{d.value=1}),(g,y)=>(r(),a("div",yt,[u(h).isLoading?(r(),a("div",_t)):(r(),a("div",vt,[u(h).userRole==="technician"||u(h).userRole==="admin"?(r(),O(Ce,{key:0})):j("",!0),e("span",Ct,[b(Xe),e("span",Bt,[e("div",St,m(u(x).filteredTickets.length)+" Tickets ",1),e("div",Tt,[Q(e("select",{"onUpdate:modelValue":y[0]||(y[0]=k=>n.value=k),onChange:y[1]||(y[1]=k=>U(1))},[Dt,jt,Et,e("option",{value:u(x).filteredTickets.length},"All",8,Ft)],544),[[R,n.value]]),(r(!0),a(w,null,B(q.value,k=>(r(),a("span",{class:_(["text-black sm:text-xl justify-center px-1.5 py-0.5 rounded-md self-start cursor-pointer",{"bg-purple text-white":k===d.value,"aspect-[0.8148148148148148]":!0}]),key:k,onClick:Qt=>U(k)},m(k),11,Ot))),128))])]),b(wt,{tickets:W.value,technicians:t.value},null,8,["tickets","technicians"]),e("div",{style:$({width:u(h).userRole==="admin"?"80vw":"96vw"}),class:"hidden sm:flex pr-5 py-2 justify-end fixed bottom-0 bg-white border-t border-black border-solid border-opacity-30"},[b(J,{onClick:l},{default:C(()=>[S("Converter para PDF")]),_:1})],4),b(ae,{show:u(f).showModal,onCancel:A,onConfirm:T},{title:C(()=>[S(" Assign Technician ")]),content:C(()=>[S(" You are about to assign "+m(u(f).selectedTechnician)+" to this ticket, are you sure? ",1)]),_:1},8,["show"])])]))]))}};export{Gt as default};
