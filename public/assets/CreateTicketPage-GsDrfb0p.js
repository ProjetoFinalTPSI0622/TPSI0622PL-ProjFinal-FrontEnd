import{_ as j,r as a,o as U,f as d,l as f,w as y,g as e,p as g,v as V,k as D,e as c,m as F,t as v,z as m,F as w,i as k,B as P,C as B,D as I}from"./index-ImCnauOu.js";import{_ as E,a as M}from"./TiptapEditor-hO3rkc5f.js";import{T as _,_ as N,S as $}from"./SideSectionTop-3i8ZP4sX.js";import{U as A}from"./UserService-_l6I9aJc.js";const o=n=>(P("data-v-651baf84"),n=n(),B(),n),L={class:"flex w-full"},z={class:"flex flex-col p-2 xl:p-5 gap-4"},H={class:"flex flex-col gap-3"},q=o(()=>e("label",{class:"text-pink-600 text-l xl:text-lg justify-center"}," Criado por: ",-1)),G={class:"border bg-white flex justify-between w-40 lg:w-full py-1 lg:py-4 lg:px-2.5 rounded-lg border-solid border-black border-opacity-20"},J={class:"flex flex-col gap-3"},K=o(()=>e("label",{class:"text-pink-600 text-l xl:text-lg justify-center"}," Categoria ",-1)),O=o(()=>e("option",{disabled:"",selected:""},"Escolha uma categoria",-1)),Q=["value"],R={class:"flex flex-col gap-3"},W=o(()=>e("label",{class:"text-pink-600 text-l xl:text-lg justify-center"}," Urgência ",-1)),X=o(()=>e("option",{disabled:"",selected:""},"Escolha a urgência",-1)),Y=["value"],Z={class:"flex flex-col w-full lg:w-[80%]"},ee={class:"text-purple flex sm:text-2xl text-xl h-[9vh] whitespace-nowrap justify-between p-3 border-b-purple border-b-opacity-30 border-b border-solid items-start"},te=o(()=>e("span",{class:"text-purple flex sm:text-2xl text-xl h-[50vh] whitespace-nowrap justify-between p-3 border-b-purple border-b-opacity-30 border-b border-solid items-start"},null,-1)),le={class:"text-purple flex flex-col gap-4 sm:text-2xl text-xl h-[30vh] whitespace-nowrap justify-between p-3 items-start"},se={class:"flex justify-between text-xl gap-2 w-full"},ae=o(()=>e("div",{class:"flex"},[e("img",{src:M}),e("span",{class:"flex px-2"},"Descrição do seu problema")],-1)),oe=["disabled"],ie={class:"w-full border border-solid border-black border-opacity-20 rounded-lg bg-grey"},re={class:"px-4 py-2 bg-grey rounded-t-lg"},de={__name:"CreateTicketPage",setup(n){const u=a([]),C=s=>{u.value=s},i=a({categories:[],selectedCategory:1}),r=a({priorities:[],selectedPriority:1}),T=a(!0),h=a({}),x=a(""),b=a(""),p=a(!1),S=async()=>{const s=new FormData;s.append("title",b.value),s.append("description",x.value),s.append("priority",r.value.selectedPriority),s.append("category",i.value.selectedCategory),u.value.forEach((l,t)=>{s.append(`files[${t}]`,l.file)});try{p.value=!0;const l=await _.createTicket(s);p.value=!1,await I.push({name:"ticketDetails",params:{ticketId:l.data.id}})}catch(l){console.log(l),p.value=!1}};return U(async()=>{try{i.value.categories=(await _.getCategories()).data,r.value.priorities=(await _.getPriorities()).data,h.value=(await A.getAuthedUser()).data}catch(s){console.log(s)}finally{T.value=!1}}),(s,l)=>(c(),d("div",L,[f(N,null,{default:y(()=>[f($,null,{default:y(()=>[F("Novo Ticket")]),_:1}),e("div",z,[e("div",H,[q,e("div",G,v(h.value.name),1)]),e("div",J,[K,g(e("select",{"onUpdate:modelValue":l[0]||(l[0]=t=>i.value.selectedCategory=t),onChange:l[1]||(l[1]=(...t)=>s.testeChange&&s.testeChange(...t)),class:"border bg-white flex justify-between w-40 lg:w-full py-1 lg:py-4 lg:px-2.5 rounded-lg border-solid border-black border-opacity-20"},[O,(c(!0),d(w,null,k(i.value.categories,t=>(c(),d("option",{key:t.id,value:t.id},v(t.name),9,Q))),128))],544),[[m,i.value.selectedCategory]])]),e("div",R,[W,g(e("select",{"onUpdate:modelValue":l[2]||(l[2]=t=>r.value.selectedPriority=t),onChange:l[3]||(l[3]=(...t)=>s.testeChange&&s.testeChange(...t)),class:"border bg-white flex justify-between w-40 lg:w-full py-1 lg:py-4 lg:px-2.5 rounded-lg border-solid border-black border-opacity-20"},[X,(c(!0),d(w,null,k(r.value.priorities,t=>(c(),d("option",{key:t.id,value:t.id},v(t.name),9,Y))),128))],544),[[m,r.value.selectedPriority]])])])]),_:1}),e("div",Z,[e("span",ee,[g(e("input",{type:"text",placeholder:"Titulo","onUpdate:modelValue":l[4]||(l[4]=t=>b.value=t),class:"bg-grey text-black text-opacity-60 text-xl w-full pt-2 pb-1.5 px-3 rounded-xl border border-solid border-black border-opacity-20"},null,512),[[V,b.value]])]),te,e("div",le,[e("div",se,[ae,e("button",{type:"submit",onClick:D(S,["prevent"]),disabled:p.value,class:"inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-purple rounded-lg hoverBlue"}," Criar Ticket ",8,oe)]),e("form",ie,[e("div",re,[f(E,{modelValue:x.value,"onUpdate:modelValue":l[5]||(l[5]=t=>x.value=t),attachedFiles:u.value,"onUpdate:attachedFiles":C},null,8,["modelValue","attachedFiles"])])])])])]))}},xe=j(de,[["__scopeId","data-v-651baf84"]]);export{xe as default};
