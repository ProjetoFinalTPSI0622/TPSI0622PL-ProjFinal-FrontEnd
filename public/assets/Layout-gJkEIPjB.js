import{A as v,r as w,a as T,o as G,b as D,c as H,d as U,e as i,f as n,g as e,t as C,h,F as M,i as R,j as g,w as l,k as z,l as d,m as j,u as a,R as m}from"./index-pqQ-StaB.js";import{_ as E}from"./logo-NSY5cdEY.js";import{_ as Z}from"./Chevron Down-nkaAdt-3.js";import{U as $}from"./UserService-Md1eL1dT.js";import{u as I}from"./UserStore-RP0sjdM7.js";const q="data:image/svg+xml,%3csvg%20width='35'%20height='35'%20viewBox='0%200%2035%2035'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Bell'%3e%3cpath%20id='Rectangle%201'%20d='M9.4031%2011.6221C9.41672%2011.4996%209.42352%2011.4383%209.43015%2011.3852C9.92442%207.4211%2013.2672%204.42921%2017.2616%204.37572C17.3151%204.375%2017.3767%204.375%2017.5%204.375V4.375C17.6233%204.375%2017.6849%204.375%2017.7384%204.37572C21.7328%204.42921%2025.0756%207.4211%2025.5699%2011.3852C25.5765%2011.4383%2025.5833%2011.4996%2025.5969%2011.6221L25.9641%2014.927C26.0567%2015.7606%2026.103%2016.1774%2026.1914%2016.5832C26.3177%2017.163%2026.508%2017.727%2026.759%2018.2647C26.9346%2018.6411%2027.1504%2019.0007%2027.582%2019.7199L28.8076%2021.7627C29.6134%2023.1056%2030.0162%2023.7771%2029.729%2024.2844C29.4418%2024.7917%2028.6587%2024.7917%2027.0926%2024.7917H7.90738C6.34127%2024.7917%205.55822%2024.7917%205.27099%2024.2844C4.98376%2023.7771%205.38664%2023.1056%206.19239%2021.7627L7.41804%2019.7199C7.84958%2019.0007%208.06536%2018.6411%208.241%2018.2647C8.49198%2017.727%208.68235%2017.163%208.8086%2016.5832C8.89695%2016.1774%208.94327%2015.7606%209.03589%2014.927L9.4031%2011.6221Z'%20stroke='white'%20stroke-width='2'/%3e%3cpath%20id='Ellipse%2045'%20d='M11.6666%2024.7917C11.6666%2025.5577%2011.8175%2026.3163%2012.1106%2027.024C12.4038%2027.7317%2012.8335%2028.3748%2013.3751%2028.9165C13.9168%2029.4581%2014.5599%2029.8878%2015.2676%2030.181C15.9753%2030.4741%2016.7339%2030.625%2017.4999%2030.625C18.266%2030.625%2019.0245%2030.4741%2019.7322%2030.181C20.44%2029.8878%2021.083%2029.4581%2021.6247%2028.9165C22.1664%2028.3748%2022.5961%2027.7317%2022.8892%2027.024C23.1824%2026.3163%2023.3333%2025.5577%2023.3333%2024.7917'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/g%3e%3c/svg%3e",k={getNotifications:async()=>await v.makeRequest("get","/notifications"),getNotificationsCount:async()=>await v.makeRequest("get","/notifications/check"),markAsSeen:async u=>await v.makeRequest("post",`/notifications/markAsSeen/${u}`)},P=u=>{const t=[];return u.forEach(c=>{const o=c.notification,s=o.notification_data.ticket;switch(c.notification.notification_data.event_type){case"ticket_created":t.push({id:o.id,ticketid:s.id,message:`Ticket #${s.id}, ${s.description} criado por ${s.createdby.name}`});break;case"ticketStatusUpdated":t.push({id:o.id,ticketid:s.id,message:`O status do ticket #${s.id} foi atualizado.`});break;case"ticketPriorityUpdated":t.push({id:o.id,ticketid:s.id,message:`A prioridade do ticket #${s.id} foi atualizada.`});break;case"ticketCommentCreated":t.push({id:o.id,ticketid:s.id,message:`Comentário adicionado ao ticket #${s.id}`});break;case"ticketAssigned":t.push({id:o.id,ticketid:s.id,message:`Ticket #${s.id} foi atribuído a você.`});break}}),t},O={class:"bg-white flex w-full h-[8vh] px-5 shadow-md place-content-between"},F=e("img",{src:E},null,-1),K={class:"flex flex-row h-full py-3.5 justify-end items-center sm:gap-4"},W={class:"relative bg-purple flex items-center justify-center rounded-3xl px-3 py-3 sm:p-2 hoverBlue"},Y={key:0},J={class:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-2 py-1"},Q={key:1,class:"absolute top-full right-0 mt-2 py-2 w-48 bg-white rounded-md shadow-xl z-20"},X=["innerHTML"],e2={class:"relative bg-purple hidden md:flex flex-row h-full rounded-3xl items-center content-between py-5 pl-2 sm:gap-5 sm:pl-4 hoverBlue"},t2=e("input",{type:"checkbox",id:"sortbox",class:"hidden absolute"},null,-1),s2={for:"sortbox",class:"flex items-center gap-2 cursor-pointer"},o2=e("img",{src:Z},null,-1),i2={class:"hidden sm:block text-white text-xl"},a2=["src"],n2={id:"sortboxmenu",class:"absolute w-[80%] top-full min-w-max shadow rounded-2xl rounded-t-none opacity-0 bg-purple transition ease-in-out z-10"},c2={class:"block text-right text-white"},r2={__name:"Navbar",setup(u){const t=w(null),c=w(null),o=w(!1),p=w(0),s=w([]),N=T([{id:1,name:"Settings",routeName:"Account"},{id:2,name:"LogOut",routeName:"Logout"}]),B=()=>{o.value=!o.value},x=async()=>{t.value=(await $.getAuthedUser()).data,c.value=(await $.getUser(t.value.id)).data};G(async()=>{await _(),await b(),await x()});const y=()=>{x()};D(()=>{window.addEventListener("user-updated",y)}),H(()=>{window.removeEventListener("user-updated",y)});const b=async()=>{s.value=P((await k.getNotifications()).data)},_=async()=>{const f=p.value;p.value=(await k.getNotificationsCount()).data.count,f!==p.value&&await b()},A=async f=>{await k.markAsSeen(f),await _()};return setInterval(()=>{_()},6e4),(f,V2)=>{var L,S;const V=U("router-link");return i(),n("div",O,[F,e("div",K,[e("div",W,[e("img",{class:"w-7 sm:min-w-8",src:q,onClick:B}),p.value>0?(i(),n("div",Y,[e("span",J,C(p.value),1)])):h("",!0),o.value?(i(),n("div",Q,[(i(!0),n(M,null,R(s.value,r=>(i(),g(V,{onClick:z(L2=>A(r.id),["prevent"]),to:{name:"ticketDetails",params:{ticketId:r.ticketid}},key:r.id,href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},{default:l(()=>[e("div",{innerHTML:r.message},null,8,X)]),_:2},1032,["onClick","to"]))),128))])):h("",!0)]),e("div",e2,[t2,e("label",s2,[o2,e("p",i2,C(t.value?t.value.name:""),1),(S=(L=c.value)==null?void 0:L.user_info)!=null&&S.profile_picture_path?(i(),n("img",{key:0,loading:"lazy",src:c.value.user_info.profile_picture_path,alt:"Imagem Utilizador",class:"aspect-square object-cover content-start w-12 overflow-hidden shrink-0 max-w-full rounded-[50%]"},null,8,a2)):h("",!0)]),e("div",n2,[e("ul",c2,[(i(!0),n(M,null,R(N,r=>(i(),n("li",{key:r.id},[d(V,{to:{name:r.routeName},class:"block px-3 py-2 hoverPurpleLight"},{default:l(()=>[j(C(r.name),1)]),_:2},1032,["to"])]))),128))])])])])])}}},l2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20clip-rule='evenodd'%20d='m10.6186%204.02454c.8125-.63194%201.9503-.63194%202.7628%200l6%204.66667c.548.42628.8686%201.08171.8686%201.77609v9.5327c0%20.3315-.1317.6495-.3661.8839s-.5524.3661-.8839.3661h-3.25v-6.25c0-2.0711-1.6789-3.75-3.75-3.75-2.07107%200-3.75%201.6789-3.75%203.75v6.25h-3.25c-.33152%200-.64946-.1317-.88388-.3661s-.36612-.5524-.36612-.8839v-9.5327c0-.69438.32056-1.34982.86863-1.77609zm-1.61689%2018.72546c-.00057%200-.00114%200-.00171%200s-.00114%200-.00171%200h-3.99829c-.72935%200-1.42882-.2897-1.94454-.8055-.51573-.5157-.80546-1.2152-.80546-1.9445v-9.5327c0-1.15726.53427-2.24966%201.44772-2.96012l6-4.66667c1.35418-1.05324%203.25038-1.05324%204.60458%200l6%204.66667c.9134.71046%201.4477%201.80286%201.4477%202.96012v9.5327c0%20.7293-.2897%201.4288-.8055%201.9445-.5157.5158-1.2152.8055-1.9445.8055h-3.9983c-.0006%200-.0011%200-.0017%200s-.0011%200-.0017%200zm5.24829-1.5h-4.5v-6.25c0-1.2426%201.0074-2.25%202.25-2.25s2.25%201.0074%202.25%202.25z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3c/svg%3e",d2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10%208V7M10%2012.5V11.5M10%2017V16M5.2%204H18.8C19.9201%204%2020.4802%204%2020.908%204.21799C21.2843%204.40973%2021.5903%204.71569%2021.782%205.09202C22%205.51984%2022%206.0799%2022%207.2V8.5C20.067%208.5%2018.5%2010.067%2018.5%2012C18.5%2013.933%2020.067%2015.5%2022%2015.5V16.8C22%2017.9201%2022%2018.4802%2021.782%2018.908C21.5903%2019.2843%2021.2843%2019.5903%2020.908%2019.782C20.4802%2020%2019.9201%2020%2018.8%2020H5.2C4.0799%2020%203.51984%2020%203.09202%2019.782C2.71569%2019.5903%202.40973%2019.2843%202.21799%2018.908C2%2018.4802%202%2017.9201%202%2016.8V15.5C3.933%2015.5%205.5%2013.933%205.5%2012C5.5%2010.067%203.933%208.5%202%208.5V7.2C2%206.0799%202%205.51984%202.21799%205.09202C2.40973%204.71569%202.71569%204.40973%203.09202%204.21799C3.51984%204%204.0799%204%205.2%204Z'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",u2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='900px'%20height='900px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16%207C16%209.20914%2014.2091%2011%2012%2011C9.79086%2011%208%209.20914%208%207C8%204.79086%209.79086%203%2012%203C14.2091%203%2016%204.79086%2016%207Z'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M12%2014C8.13401%2014%205%2017.134%205%2021H19C19%2017.134%2015.866%2014%2012%2014Z'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",p2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:none;stroke:%23fff;stroke-miterlimit:10;stroke-width:1.91px;}%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='M19.43,19.43A10.5,10.5,0,1,1,12,1.5V12Z'/%3e%3cpath%20class='cls-1'%20d='M22.5,12a10.47,10.47,0,0,1-3.07,7.43L12,12'/%3e%3cpath%20class='cls-1'%20d='M12,12V1.5A10.5,10.5,0,0,1,22.5,12'/%3e%3cline%20class='cls-1'%20x1='12.95'%20y1='12'%20x2='22.5'%20y2='12'/%3e%3c/svg%3e",m2="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M11%203H13C13.5523%203%2014%203.44772%2014%204V4.56879C14%204.99659%2014.2871%205.36825%2014.6822%205.53228C15.0775%205.69638%2015.5377%205.63384%2015.8403%205.33123L16.2426%204.92891C16.6331%204.53838%2017.2663%204.53838%2017.6568%204.92891L19.071%206.34312C19.4616%206.73365%2019.4615%207.36681%2019.071%207.75734L18.6688%208.1596C18.3661%208.46223%2018.3036%208.92247%2018.4677%209.31774C18.6317%209.71287%2019.0034%2010%2019.4313%2010L20%2010C20.5523%2010%2021%2010.4477%2021%2011V13C21%2013.5523%2020.5523%2014%2020%2014H19.4312C19.0034%2014%2018.6318%2014.2871%2018.4677%2014.6822C18.3036%2015.0775%2018.3661%2015.5377%2018.6688%2015.8403L19.071%2016.2426C19.4616%2016.6331%2019.4616%2017.2663%2019.071%2017.6568L17.6568%2019.071C17.2663%2019.4616%2016.6331%2019.4616%2016.2426%2019.071L15.8403%2018.6688C15.5377%2018.3661%2015.0775%2018.3036%2014.6822%2018.4677C14.2871%2018.6318%2014%2019.0034%2014%2019.4312V20C14%2020.5523%2013.5523%2021%2013%2021H11C10.4477%2021%2010%2020.5523%2010%2020V19.4313C10%2019.0034%209.71287%2018.6317%209.31774%2018.4677C8.92247%2018.3036%208.46223%2018.3661%208.1596%2018.6688L7.75732%2019.071C7.36679%2019.4616%206.73363%2019.4616%206.34311%2019.071L4.92889%2017.6568C4.53837%2017.2663%204.53837%2016.6331%204.92889%2016.2426L5.33123%2015.8403C5.63384%2015.5377%205.69638%2015.0775%205.53228%2014.6822C5.36825%2014.2871%204.99659%2014%204.56879%2014H4C3.44772%2014%203%2013.5523%203%2013V11C3%2010.4477%203.44772%2010%204%2010L4.56877%2010C4.99658%2010%205.36825%209.71288%205.53229%209.31776C5.6964%208.9225%205.63386%208.46229%205.33123%208.15966L4.92891%207.75734C4.53838%207.36681%204.53838%206.73365%204.92891%206.34313L6.34312%204.92891C6.73365%204.53839%207.36681%204.53839%207.75734%204.92891L8.15966%205.33123C8.46228%205.63386%208.9225%205.6964%209.31776%205.53229C9.71288%205.36825%2010%204.99658%2010%204.56876V4C10%203.44772%2010.4477%203%2011%203Z'%20stroke='%23ffffff'%20stroke-width='1.5'/%3e%3cpath%20d='M14%2012C14%2013.1046%2013.1046%2014%2012%2014C10.8954%2014%2010%2013.1046%2010%2012C10%2010.8954%2010.8954%2010%2012%2010C13.1046%2010%2014%2010.8954%2014%2012Z'%20stroke='%23ffffff'%20stroke-width='1.5'/%3e%3c/g%3e%3c/svg%3e",h2="/assets/Ellipse 5-KtNZGiqK.svg",w2={class:"bg-purple flex flex-row w-full h-14 py-4 px-8 place-content-between fixed bottom-0 min-w-14 sm:flex-col sm:w-[4.5%] sm:h-full sm:p-4 sm:relative sm:place-content-start sm:gap-10"},f2=e("img",{src:l2},null,-1),g2=e("img",{src:d2},null,-1),_2=e("img",{src:u2},null,-1),v2=e("img",{src:p2},null,-1),C2=e("img",{src:m2},null,-1),k2=e("img",{src:h2},null,-1),x2={__name:"SideBar",setup(u){const t=I();return G(async()=>{await t.fetchAuthedUser()}),(c,o)=>(i(),n("div",w2,[d(a(m),{to:"/",class:"lg:w-full w-6"},{default:l(()=>[f2]),_:1}),d(a(m),{to:"/tickets/show",class:"lg:w-full w-6"},{default:l(()=>[g2]),_:1}),a(t).userRole==="admin"?(i(),g(a(m),{key:0,to:"/users",class:"lg:w-full w-6"},{default:l(()=>[_2]),_:1})):h("",!0),a(t).userRole==="admin"||a(t).userRole==="technician"?(i(),g(a(m),{key:1,to:"/dashboard",class:"lg:w-full w-6"},{default:l(()=>[v2]),_:1})):h("",!0),a(t).userRole==="admin"?(i(),g(a(m),{key:2,to:"/settings/configurations",class:"lg:w-full w-6"},{default:l(()=>[C2]),_:1})):h("",!0),d(a(m),{to:"/settings/account",class:"lg:w-full w-6 md:hidden min-w-4"},{default:l(()=>[k2]),_:1})]))}},y2={class:"h-screen w-screen"},b2={class:"flex flex-row sm:h-[92vh] w-full"},U2={__name:"Layout",setup(u){return(t,c)=>{const o=U("router-view");return i(),n("div",y2,[d(r2),e("div",b2,[d(x2),d(o)])])}}};export{U2 as default};
