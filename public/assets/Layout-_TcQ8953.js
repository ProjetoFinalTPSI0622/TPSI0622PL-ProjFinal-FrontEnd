import{A as o,r as i,a as H,o as z,b as F,c as W,d as E,e as a,f as c,g as r,w as g,t as R,h as f,F as S,i as U,j as b,k as w,l as h,m as j,u as d,R as _}from"./index-oqzXqftB.js";import{_ as Y}from"./logo-NSY5cdEY.js";import{_ as J}from"./Chevron Down-nkaAdt-3.js";import{U as A}from"./UserService-q-keLY2x.js";import{u as K}from"./UserStore-b7oFAVpl.js";const Q="data:image/svg+xml,%3csvg%20width='35'%20height='35'%20viewBox='0%200%2035%2035'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Bell'%3e%3cpath%20id='Rectangle%201'%20d='M9.4031%2011.6221C9.41672%2011.4996%209.42352%2011.4383%209.43015%2011.3852C9.92442%207.4211%2013.2672%204.42921%2017.2616%204.37572C17.3151%204.375%2017.3767%204.375%2017.5%204.375V4.375C17.6233%204.375%2017.6849%204.375%2017.7384%204.37572C21.7328%204.42921%2025.0756%207.4211%2025.5699%2011.3852C25.5765%2011.4383%2025.5833%2011.4996%2025.5969%2011.6221L25.9641%2014.927C26.0567%2015.7606%2026.103%2016.1774%2026.1914%2016.5832C26.3177%2017.163%2026.508%2017.727%2026.759%2018.2647C26.9346%2018.6411%2027.1504%2019.0007%2027.582%2019.7199L28.8076%2021.7627C29.6134%2023.1056%2030.0162%2023.7771%2029.729%2024.2844C29.4418%2024.7917%2028.6587%2024.7917%2027.0926%2024.7917H7.90738C6.34127%2024.7917%205.55822%2024.7917%205.27099%2024.2844C4.98376%2023.7771%205.38664%2023.1056%206.19239%2021.7627L7.41804%2019.7199C7.84958%2019.0007%208.06536%2018.6411%208.241%2018.2647C8.49198%2017.727%208.68235%2017.163%208.8086%2016.5832C8.89695%2016.1774%208.94327%2015.7606%209.03589%2014.927L9.4031%2011.6221Z'%20stroke='white'%20stroke-width='2'/%3e%3cpath%20id='Ellipse%2045'%20d='M11.6666%2024.7917C11.6666%2025.5577%2011.8175%2026.3163%2012.1106%2027.024C12.4038%2027.7317%2012.8335%2028.3748%2013.3751%2028.9165C13.9168%2029.4581%2014.5599%2029.8878%2015.2676%2030.181C15.9753%2030.4741%2016.7339%2030.625%2017.4999%2030.625C18.266%2030.625%2019.0245%2030.4741%2019.7322%2030.181C20.44%2029.8878%2021.083%2029.4581%2021.6247%2028.9165C22.1664%2028.3748%2022.5961%2027.7317%2022.8892%2027.024C23.1824%2026.3163%2023.3333%2025.5577%2023.3333%2024.7917'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/g%3e%3c/svg%3e",L={getNotifications:async()=>await o.makeRequest("get","/notifications"),getNotificationsCount:async()=>await o.makeRequest("get","/notifications/check"),markAsSeen:async e=>await o.makeRequest("post",`/notifications/markAsSeen/${e}`)},X=e=>{const s=[];return e.forEach(l=>{const n=l.notification,t=n.notification_data.ticket;switch(l.notification.notification_data.event_type){case"ticket_created":s.push({id:n.id,ticketid:t.id,message:`Ticket #${t.id}, ${t.description} criado por ${t.createdby.name}`});break;case"ticketStatusUpdated":s.push({id:n.id,ticketid:t.id,message:`O status do ticket #${t.id} foi atualizado.`});break;case"ticketPriorityUpdated":s.push({id:n.id,ticketid:t.id,message:`A prioridade do ticket #${t.id} foi atualizada.`});break;case"ticketCommentCreated":s.push({id:n.id,ticketid:t.id,message:`Comentário adicionado ao ticket #${t.id}`});break;case"ticketAssigned":s.push({id:n.id,ticketid:t.id,message:`Ticket #${t.id} foi atribuído a você.`});break}}),s},e2={class:"bg-white flex w-full h-[8vh] px-5 shadow-md place-content-between"},t2=r("img",{src:Y},null,-1),s2={class:"flex flex-row h-full py-3.5 justify-end items-center sm:gap-2"},o2=r("img",{class:"w-7 sm:min-w-8",src:Q},null,-1),a2={key:0},r2={class:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-2 py-1"},n2=["innerHTML"],i2=r("img",{class:"w-7 sm:min-w-8",src:J},null,-1),c2={class:"hidden sm:block text-white text-xl"},l2=["src"],d2={class:"block text-right"},u2={__name:"Navbar",setup(e){const s=i(null),l=i(null),n=i(null),C=i(null),t=i(!1),x=i(null),u=i(!1),y=i(null),v=i(0),k=i([]),P=H([{id:1,name:"Definições de conta",routeName:"Account"},{id:2,name:"Terminar sessão",routeName:"Logout"}]),$=async()=>{s.value=(await A.getAuthedUser()).data,l.value=(await A.getUser(s.value.id)).data};z(async()=>{await V(),await D(),await $()});const M=()=>{$()};F(()=>{window.addEventListener("user-updated",M),window.addEventListener("click",G)}),W(()=>{window.removeEventListener("user-updated",M),window.removeEventListener("click",G)});const D=async()=>{k.value=X((await L.getNotifications()).data)},V=async()=>{const p=v.value;v.value=(await L.getNotificationsCount()).data.count,p!==v.value&&await D()},Z=async p=>{await L.markAsSeen(p),await V()};setInterval(()=>{V()},6e4);const G=p=>{n.value&&!n.value.contains(p.target)&&!C.value.contains(p.target)&&(t.value=!1),y.value&&!y.value.contains(p.target)&&!x.value.contains(p.target)&&(u.value=!1)},O=()=>{t.value=!t.value,t.value&&(u.value=!1)},N=()=>{u.value=!u.value,u.value&&(t.value=!1)};return(p,q)=>{var I,T;const B=E("router-link");return a(),c("div",e2,[t2,r("div",s2,[r("div",{onClick:g(O,["stop"]),ref_key:"bellIconRef",ref:C,class:"relative bg-purple flex items-center justify-center rounded-3xl px-2 py-1.5 hoverBlue"},[o2,v.value>0?(a(),c("div",a2,[r("span",r2,R(v.value),1)])):f("",!0),t.value?(a(),c("div",{key:1,onClick:q[0]||(q[0]=g(()=>{},["stop"])),ref_key:"dropdownRef",ref:n,class:"absolute top-full right-0 mt-2 py-2 w-48 bg-white rounded-md shadow-xl z-20 h-44 overflow-y-auto border border-black border-opacity-20"},[(a(!0),c(S,null,U(k.value,m=>(a(),b(B,{onClick:g(U2=>Z(m.id),["prevent"]),to:{name:"ticketDetails",params:{ticketId:m.ticketid}},key:m.id,href:"#",class:"block px-4 py-2 text-sm text-gray-700 hoverBlue"},{default:w(()=>[r("div",{innerHTML:m.message},null,8,n2)]),_:2},1032,["onClick","to"]))),128))],512)):f("",!0)],512),r("div",{ref_key:"secondIconRef",ref:x,onClick:g(N,["stop"]),class:"relative bg-purple hidden md:flex flex-row h-full rounded-3xl items-center content-between py-5 pl-2 gap-2 hoverBlue"},[i2,r("p",c2,R(s.value?s.value.name:""),1),(T=(I=l.value)==null?void 0:I.user_info)!=null&&T.profile_picture_path?(a(),c("img",{key:0,loading:"lazy",src:l.value.user_info.profile_picture_path,alt:"Imagem Utilizador",class:"aspect-square object-cover content-start w-12 overflow-hidden shrink-0 max-w-full rounded-[50%]"},null,8,l2)):f("",!0),u.value?(a(),c("div",{key:1,onClick:g(N,["stop"]),ref_key:"secondDropdownRef",ref:y,class:"absolute top-full right-0 mt-2.5 py-2 w-44 bg-white rounded-md shadow-xl z-20 border border-black border-opacity-20"},[r("ul",d2,[(a(!0),c(S,null,U(P,m=>(a(),c("li",{key:m.id},[h(B,{to:{name:m.routeName},class:"block px-3 py-2 text-gray-700 hoverBlue"},{default:w(()=>[j(R(m.name),1)]),_:2},1032,["to"])]))),128))])],512)):f("",!0)],512)])])}}},p2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20clip-rule='evenodd'%20d='m10.6186%204.02454c.8125-.63194%201.9503-.63194%202.7628%200l6%204.66667c.548.42628.8686%201.08171.8686%201.77609v9.5327c0%20.3315-.1317.6495-.3661.8839s-.5524.3661-.8839.3661h-3.25v-6.25c0-2.0711-1.6789-3.75-3.75-3.75-2.07107%200-3.75%201.6789-3.75%203.75v6.25h-3.25c-.33152%200-.64946-.1317-.88388-.3661s-.36612-.5524-.36612-.8839v-9.5327c0-.69438.32056-1.34982.86863-1.77609zm-1.61689%2018.72546c-.00057%200-.00114%200-.00171%200s-.00114%200-.00171%200h-3.99829c-.72935%200-1.42882-.2897-1.94454-.8055-.51573-.5157-.80546-1.2152-.80546-1.9445v-9.5327c0-1.15726.53427-2.24966%201.44772-2.96012l6-4.66667c1.35418-1.05324%203.25038-1.05324%204.60458%200l6%204.66667c.9134.71046%201.4477%201.80286%201.4477%202.96012v9.5327c0%20.7293-.2897%201.4288-.8055%201.9445-.5157.5158-1.2152.8055-1.9445.8055h-3.9983c-.0006%200-.0011%200-.0017%200s-.0011%200-.0017%200zm5.24829-1.5h-4.5v-6.25c0-1.2426%201.0074-2.25%202.25-2.25s2.25%201.0074%202.25%202.25z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3c/svg%3e",f2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10%208V7M10%2012.5V11.5M10%2017V16M5.2%204H18.8C19.9201%204%2020.4802%204%2020.908%204.21799C21.2843%204.40973%2021.5903%204.71569%2021.782%205.09202C22%205.51984%2022%206.0799%2022%207.2V8.5C20.067%208.5%2018.5%2010.067%2018.5%2012C18.5%2013.933%2020.067%2015.5%2022%2015.5V16.8C22%2017.9201%2022%2018.4802%2021.782%2018.908C21.5903%2019.2843%2021.2843%2019.5903%2020.908%2019.782C20.4802%2020%2019.9201%2020%2018.8%2020H5.2C4.0799%2020%203.51984%2020%203.09202%2019.782C2.71569%2019.5903%202.40973%2019.2843%202.21799%2018.908C2%2018.4802%202%2017.9201%202%2016.8V15.5C3.933%2015.5%205.5%2013.933%205.5%2012C5.5%2010.067%203.933%208.5%202%208.5V7.2C2%206.0799%202%205.51984%202.21799%205.09202C2.40973%204.71569%202.71569%204.40973%203.09202%204.21799C3.51984%204%204.0799%204%205.2%204Z'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",m2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='900px'%20height='900px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16%207C16%209.20914%2014.2091%2011%2012%2011C9.79086%2011%208%209.20914%208%207C8%204.79086%209.79086%203%2012%203C14.2091%203%2016%204.79086%2016%207Z'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M12%2014C8.13401%2014%205%2017.134%205%2021H19C19%2017.134%2015.866%2014%2012%2014Z'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",w2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:none;stroke:%23fff;stroke-miterlimit:10;stroke-width:1.91px;}%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='M19.43,19.43A10.5,10.5,0,1,1,12,1.5V12Z'/%3e%3cpath%20class='cls-1'%20d='M22.5,12a10.47,10.47,0,0,1-3.07,7.43L12,12'/%3e%3cpath%20class='cls-1'%20d='M12,12V1.5A10.5,10.5,0,0,1,22.5,12'/%3e%3cline%20class='cls-1'%20x1='12.95'%20y1='12'%20x2='22.5'%20y2='12'/%3e%3c/svg%3e",g2="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M11%203H13C13.5523%203%2014%203.44772%2014%204V4.56879C14%204.99659%2014.2871%205.36825%2014.6822%205.53228C15.0775%205.69638%2015.5377%205.63384%2015.8403%205.33123L16.2426%204.92891C16.6331%204.53838%2017.2663%204.53838%2017.6568%204.92891L19.071%206.34312C19.4616%206.73365%2019.4615%207.36681%2019.071%207.75734L18.6688%208.1596C18.3661%208.46223%2018.3036%208.92247%2018.4677%209.31774C18.6317%209.71287%2019.0034%2010%2019.4313%2010L20%2010C20.5523%2010%2021%2010.4477%2021%2011V13C21%2013.5523%2020.5523%2014%2020%2014H19.4312C19.0034%2014%2018.6318%2014.2871%2018.4677%2014.6822C18.3036%2015.0775%2018.3661%2015.5377%2018.6688%2015.8403L19.071%2016.2426C19.4616%2016.6331%2019.4616%2017.2663%2019.071%2017.6568L17.6568%2019.071C17.2663%2019.4616%2016.6331%2019.4616%2016.2426%2019.071L15.8403%2018.6688C15.5377%2018.3661%2015.0775%2018.3036%2014.6822%2018.4677C14.2871%2018.6318%2014%2019.0034%2014%2019.4312V20C14%2020.5523%2013.5523%2021%2013%2021H11C10.4477%2021%2010%2020.5523%2010%2020V19.4313C10%2019.0034%209.71287%2018.6317%209.31774%2018.4677C8.92247%2018.3036%208.46223%2018.3661%208.1596%2018.6688L7.75732%2019.071C7.36679%2019.4616%206.73363%2019.4616%206.34311%2019.071L4.92889%2017.6568C4.53837%2017.2663%204.53837%2016.6331%204.92889%2016.2426L5.33123%2015.8403C5.63384%2015.5377%205.69638%2015.0775%205.53228%2014.6822C5.36825%2014.2871%204.99659%2014%204.56879%2014H4C3.44772%2014%203%2013.5523%203%2013V11C3%2010.4477%203.44772%2010%204%2010L4.56877%2010C4.99658%2010%205.36825%209.71288%205.53229%209.31776C5.6964%208.9225%205.63386%208.46229%205.33123%208.15966L4.92891%207.75734C4.53838%207.36681%204.53838%206.73365%204.92891%206.34313L6.34312%204.92891C6.73365%204.53839%207.36681%204.53839%207.75734%204.92891L8.15966%205.33123C8.46228%205.63386%208.9225%205.6964%209.31776%205.53229C9.71288%205.36825%2010%204.99658%2010%204.56876V4C10%203.44772%2010.4477%203%2011%203Z'%20stroke='%23ffffff'%20stroke-width='1.5'/%3e%3cpath%20d='M14%2012C14%2013.1046%2013.1046%2014%2012%2014C10.8954%2014%2010%2013.1046%2010%2012C10%2010.8954%2010.8954%2010%2012%2010C13.1046%2010%2014%2010.8954%2014%2012Z'%20stroke='%23ffffff'%20stroke-width='1.5'/%3e%3c/g%3e%3c/svg%3e",h2={getUsers:async()=>await o.makeRequest("get","/users"),getUser:async e=>o.makeRequest("get",`/users/${e}`),createUser:async e=>o.makeRequest("post","/users",e),createUserInfo:async e=>o.makeRequest("post","/userInfo",e,"multipart/form-data"),updateUserInfo:async e=>o.makeRequest("post","/userInfo/"+e.get("user_id"),e,"multipart/form-data"),updateUser:async e=>o.makeRequest("put",`/users/${e.id}`,e),deleteUser:async e=>o.makeRequest("delete",`/users/${e}`),getTechnicians:async()=>o.makeRequest("get","/users/technicians"),getAuthedUser:async()=>o.makeRequest("get","/users/authed"),getRoles:async()=>o.makeRequest("get","/roles"),getGenders:async()=>o.makeRequest("get","/genders"),getCountries:async()=>o.makeRequest("get","/countries"),changePassword:async e=>o.makeRequest("put","/users/changePassword",e),loadUserData:async e=>o.makeRequest("get",`/users/${e}`),resetPassword:async e=>o.makeRequest("put","/users/resetPassword",e)},v2={class:"bg-purple flex flex-row w-full h-14 py-4 px-8 place-content-between fixed bottom-0 min-w-14 sm:flex-col sm:w-[4.5%] sm:h-full sm:p-4 sm:relative sm:place-content-start sm:gap-10"},k2=r("img",{src:p2},null,-1),_2=r("img",{src:f2},null,-1),C2=r("img",{src:m2},null,-1),x2=r("img",{src:w2},null,-1),y2=r("img",{src:g2},null,-1),R2=["src"],b2={class:"block text-right"},V2={__name:"SideBar",setup(e){const s=K(),l=i(!1),n=i(null),C=i(null),t=i(null);z(async()=>{await s.fetchAuthedUser(),t.value=(await h2.getUser(s.currentUser.id)).data});const x=H([{id:1,name:"Definições de conta",routeName:"Account"},{id:2,name:"Terminar sessão",routeName:"Logout"}]),u=()=>{l.value=!l.value};return(y,v)=>(a(),c("div",v2,[h(d(_),{to:"/",class:"lg:w-full w-6"},{default:w(()=>[k2]),_:1}),h(d(_),{to:"/tickets/show",class:"lg:w-full w-6"},{default:w(()=>[_2]),_:1}),d(s).userRole==="admin"?(a(),b(d(_),{key:0,to:"/users",class:"lg:w-full w-6"},{default:w(()=>[C2]),_:1})):f("",!0),d(s).userRole==="admin"||d(s).userRole==="technician"?(a(),b(d(_),{key:1,to:"/dashboard",class:"lg:w-full w-6"},{default:w(()=>[x2]),_:1})):f("",!0),d(s).userRole==="admin"?(a(),b(d(_),{key:2,to:"/settings/configurations",class:"lg:w-full w-6"},{default:w(()=>[y2]),_:1})):f("",!0),t.value?(a(),c("div",{key:3,class:"lg:w-full w-6 md:hidden min-w-4",ref_key:"secondIconRef",ref:C,onClick:g(u,["stop"])},[r("img",{src:t.value.user_info.profile_picture_path,class:"rounded-2xl"},null,8,R2),l.value?(a(),c("div",{key:0,onClick:g(u,["stop"]),ref_key:"secondDropdownRef",ref:n,class:"relative top-full right-32 mt-[-10rem] sm:left-10 sm:mt-[-7rem] py-2 w-44 bg-white rounded-md shadow-xl z-20 border border-black border-opacity-20"},[r("ul",b2,[(a(!0),c(S,null,U(x,k=>(a(),c("li",{key:k.id},[h(d(_),{to:{name:k.routeName},class:"block px-3 py-2 text-gray-700 hoverBlue"},{default:w(()=>[j(R(k.name),1)]),_:2},1032,["to"])]))),128))])],512)):f("",!0)],512)):f("",!0)]))}},L2={class:"h-screen w-screen"},S2={class:"flex flex-row sm:h-[92vh] w-full"},q2={__name:"Layout",setup(e){return(s,l)=>{const n=E("router-view");return a(),c("div",L2,[h(u2),r("div",S2,[h(V2),h(n)])])}}};export{q2 as default};
