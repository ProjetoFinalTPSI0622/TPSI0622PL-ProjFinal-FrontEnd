import{U as p}from"./UserService-11tNsOaY.js";import{T as B}from"./TicketsTable-CBVqs9eS.js";import{u as N,a as $}from"./TicketStore-e0zKodFB.js";import{_ as A}from"./Modal-st3w6cCa.js";import{u as E}from"./UserStore-UKcFdLw_.js";import{_ as L,e as n,f as o,n as P,r as t,o as j,p as v,q as D,g as r,l as f,m as h,t as k,h as x,u as c,k as T}from"./index-cL9glRiX.js";import"./ToastStore-pJUtHWyZ.js";import"./TicketsService-5K2kzTvR.js";const F={},R={class:"flex flex-col justify-center content-center w-full h-[50%]"},q=P('<h1 class="text-center" data-v-fd34db75><div class="animation" data-v-fd34db75><span class="first text-purple font-bold" data-v-fd34db75>Cesae</span><span class="overflow-hidden inline-flex" data-v-fd34db75><span class="second text-pink font-semibold" data-v-fd34db75>Desk</span></span></div></h1>',1),H=[q];function K(g,i){return n(),o("div",R,H)}const O=L(F,[["render",K],["__scopeId","data-v-fd34db75"]]),Y={class:"w-full p-5 overflow-auto"},z={class:"w-full flex flex-col items-center justify-start min-h-screen bg-grey mb-20 md:mb-0"},G={class:"items-center my-3"},J={key:0,class:"text-4xl lg:text-3xl font-bold text-purple"},Q={class:"text-blue"},W={key:0,class:"pl-3"},X=r("p",{class:"underline"},"ULTIMOS TICKETS",-1),re={__name:"HomePage",setup(g){const i=E(),s=t({user:null,isLoading:!0}),w=t([]),_=t([]),m=t(1),l=t(5),b=t(""),a=N(),d=$(),y=async()=>{s.value.user=(await p.getAuthedUser()).data,s.value.isLoading=!1};j(async()=>{await y(),await M(),await U()});const C=()=>{a.handleCancelModal()},S=()=>{a.handleConfirmModal()},M=async()=>{try{w.value=await d.getTickets()}catch(e){console.error("Error fetching tickets:",e)}},U=async()=>{try{const e=await p.getTechnicians();e.success?_.value=e.data:console.error("Invalid response structure:",e)}catch(e){console.error("Error fetching technicians:",e)}},I=v(()=>{const e=d.filteredTickets,u=(m.value-1)*l.value,V=u+l.value;return e.slice(u,V)});return v(()=>Math.ceil(d.filteredTickets.length/l.value)),D(b,()=>{m.value=1}),(e,u)=>(n(),o("div",Y,[r("div",z,[f(O),r("div",G,[s.value.isLoading?x("",!0):(n(),o("h1",J,[h(" Bem-Vindo, "),r("span",Q,k(s.value.user.name)+"!",1)]))]),c(i).userRole==="admin"||c(i).userRole==="technician"?(n(),o("div",W,[X,f(B,{tickets:I.value,technicians:_.value},null,8,["tickets","technicians"])])):x("",!0),f(A,{show:c(a).showModal,onCancel:C,onConfirm:S},{title:T(()=>[h(" Assign Technician ")]),content:T(()=>[h(" You are about to assign "+k(c(a).selectedTechnician)+" to this ticket, are you sure? ",1)]),_:1},8,["show"])])]))}};export{re as default};
