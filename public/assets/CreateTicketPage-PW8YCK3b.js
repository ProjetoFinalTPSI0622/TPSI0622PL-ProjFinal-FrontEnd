import{_ as L,r as s,o as U,f as i,l as m,k as C,g as t,v as g,x as V,w as D,e as r,m as F,t as x,B as h,F as _,i as y,D as P,E as B,C as E}from"./index-oqzXqftB.js";import{_ as I,a as M}from"./TiptapEditor-Vb02g-uW.js";import{_ as N,S as $}from"./SideSectionTop-VN73Jf1V.js";import{T as w}from"./TicketsService-X8iuOJwP.js";import{U as z}from"./UserService-q-keLY2x.js";import{L as A}from"./LocationsService-MABsq6r2.js";const a=p=>(P("data-v-5607aa22"),p=p(),B(),p),H={class:"flex w-full overflow-auto"},q={class:"flex flex-col p-2 xl:p-5 gap-4"},G={class:"flex flex-col gap-3"},J=a(()=>t("label",{class:"text-pink-600 text-l xl:text-lg justify-center"}," Criado por: ",-1)),K={class:"border bg-white flex justify-between w-40 lg:w-full py-1 lg:py-4 lg:px-2.5 rounded-lg border-solid border-black border-opacity-20"},O={class:"flex flex-col gap-3"},Q=a(()=>t("label",{class:"text-pink-600 text-l xl:text-lg justify-center"}," Categoria ",-1)),R=a(()=>t("option",{disabled:"",selected:""},"Escolha uma categoria",-1)),W=["value"],X={class:"flex flex-col gap-3"},Y=a(()=>t("label",{class:"text-pink-600 text-l xl:text-lg justify-center"}," Urgência ",-1)),Z=a(()=>t("option",{disabled:"",selected:""},"Escolha a urgência",-1)),ee=["value"],te={class:"flex flex-col gap-3"},le=a(()=>t("label",{class:"text-pink-600 text-l xl:text-lg justify-center"}," Localização ",-1)),oe=a(()=>t("option",{disabled:"",selected:""},"Escolha a Localização",-1)),se=["value"],ae={class:"flex flex-col w-full lg:w-[80%]"},ie={class:"text-purple flex sm:text-2xl text-xl h-[9vh] whitespace-nowrap justify-between p-3 border-b-purple border-b-opacity-30 border-b border-solid items-start"},re=a(()=>t("span",{class:"text-purple sm:text-2xl text-xl overflow-auto h-80 sm:h-[53vh] justify-between sm:pl-4 sm:pr-12 px-14 items-start border-b-purple border-b-opacity-30 border-b border-solid"},null,-1)),de={class:"text-purple flex w-full flex-col p-3 gap-3 sm:text-2xl text-xl items-start"},ne={class:"flex justify-between text-xl gap-2 w-full"},ce=a(()=>t("div",{class:"flex gap-2"},[t("img",{src:M}),t("span",{class:"flex items-center"},"Descrição")],-1)),pe=["disabled"],ue={class:"w-full border border-solid border-black border-opacity-20 rounded-lg bg-grey"},ge={class:"px-4 py-2 bg-grey rounded-t-lg"},xe={__name:"CreateTicketPage",setup(p){const f=s([]),T=o=>{f.value=o},d=s({categories:[],selectedCategory:1}),n=s({priorities:[],selectedPriority:1}),c=s({locations:[],selectedLocation:1}),S=s(!0),k=s({}),b=s(""),v=s(""),u=s(!1),j=async()=>{const o=new FormData;o.append("title",v.value),o.append("description",b.value),o.append("priority",n.value.selectedPriority),o.append("category",d.value.selectedCategory),o.append("location",c.value.selectedLocation),f.value.forEach((l,e)=>{o.append(`files[${e}]`,l.file)});try{u.value=!0;const l=await w.createTicket(o);u.value=!1,await E.push({name:"ticketDetails",params:{ticketId:l.data.id}})}catch(l){console.log(l),u.value=!1}};return U(async()=>{try{d.value.categories=(await w.getCategories()).data,n.value.priorities=(await w.getPriorities()).data,c.value.locations=(await A.getLocations()).data,k.value=(await z.getAuthedUser()).data}catch(o){console.log(o)}finally{S.value=!1}}),(o,l)=>(r(),i("div",H,[m(N,{class:"hidden"},{default:C(()=>[m($,null,{default:C(()=>[F("Novo Ticket")]),_:1}),t("div",q,[t("div",G,[J,t("div",K,x(k.value.name),1)]),t("div",O,[Q,g(t("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>d.value.selectedCategory=e),onChange:l[1]||(l[1]=(...e)=>o.testeChange&&o.testeChange(...e)),class:"cursor-pointer border bg-white flex justify-between w-40 lg:w-full py-1 lg:py-4 lg:px-2.5 rounded-lg border-solid border-black border-opacity-20"},[R,(r(!0),i(_,null,y(d.value.categories,e=>(r(),i("option",{key:e.id,value:e.id},x(e.name),9,W))),128))],544),[[h,d.value.selectedCategory]])]),t("div",X,[Y,g(t("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>n.value.selectedPriority=e),onChange:l[3]||(l[3]=(...e)=>o.testeChange&&o.testeChange(...e)),class:"cursor-pointer border bg-white flex justify-between w-40 lg:w-full py-1 lg:py-4 lg:px-2.5 rounded-lg border-solid border-black border-opacity-20"},[Z,(r(!0),i(_,null,y(n.value.priorities,e=>(r(),i("option",{key:e.id,value:e.id},x(e.name),9,ee))),128))],544),[[h,n.value.selectedPriority]])]),t("div",te,[le,g(t("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>c.value.selectedLocation=e),onChange:l[5]||(l[5]=(...e)=>o.testeChange&&o.testeChange(...e)),class:"cursor-pointer border bg-white flex justify-between w-40 lg:w-full py-1 lg:py-4 lg:px-2.5 rounded-lg border-solid border-black border-opacity-20"},[oe,(r(!0),i(_,null,y(c.value.locations,e=>(r(),i("option",{key:e.id,value:e.id},x(e.name),9,se))),128))],544),[[h,c.value.selectedLocation]])])])]),_:1}),t("div",ae,[t("span",ie,[g(t("input",{type:"text",placeholder:"Titulo","onUpdate:modelValue":l[6]||(l[6]=e=>v.value=e),maxlength:"50",class:"bg-grey text-black text-opacity-60 text-xl w-full pt-2 pb-1.5 px-3 rounded-xl border border-solid border-black border-opacity-20"},null,512),[[V,v.value]])]),re,t("div",de,[t("div",ne,[ce,t("button",{type:"submit",onClick:D(j,["prevent"]),disabled:u.value,class:"inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-purple rounded-lg hoverBlue"}," Criar Ticket ",8,pe)]),t("form",ue,[t("div",ge,[m(I,{modelValue:b.value,"onUpdate:modelValue":l[7]||(l[7]=e=>b.value=e),attachedFiles:f.value,"onUpdate:attachedFiles":T},null,8,["modelValue","attachedFiles"])])])])])]))}},ye=L(xe,[["__scopeId","data-v-5607aa22"]]);export{ye as default};
